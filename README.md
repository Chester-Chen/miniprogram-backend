# MiniProgram-Backend
考研政治刷题小程序NodeJS后端代码

## 技术
+ node.js+express框架
+ mongodb数据库

## 功能
### 用户
+ 获取用户头像和昵称
+ 存入用户头像和昵称
+ 更新用户个人信息
+ 获取用户个人信息
+ 根据临时code获取openID
+ 坚持天数最多的20名用户
+ 刷题数量最多的20名用户

### 题目
+ 获取某科目的所有题目
+ 获取某科目下某章节的所有题目
+ 获取随机的20道题
+ 获取某科目的一套模拟题（单选16道，多选17道）
+ 新增一道题目
+ 获取某题目内容
+ 获取某科目下的所有章节名
+ 错题重练（随机20道， 小于则全返回）

### 笔记
+ 为某题添加或更新笔记
+ 获取用户某题的笔记
+ 删除笔记
+ 获取用户某科目下的所有笔记 

### 收藏
+ 收藏题目
+ 取消收藏某题
+ 某道题是否收藏
+ 获取收藏的题目

### 做题结果
+ 将某题标记为错题
+ 将某题加入已做过的题目(做对)
+ 存储模拟题做题结果 

### 进度/正确率
+ 各科目总题数，(个人)做过的，正确率，进度
+ 某科目各章总题数+每章做过的题数
+ 某题的用户正确率（做对这题的人数/做过这题的人数）

### 公告栏
+ 获取公告栏内容
+ 修改公告栏内容

### 管理员
+ 判断是否为管理员

## 将题目存入数据库
```
cd miniprogram-backend

cd util

node saveOriginQuestions.js
```

## 运行
```
cd miniprogram-backend

npm install

node app.js
```

## mocha测试
app.js中将原httpServer注释掉，打开最后三行导出模块的注释
```
mocha
```
